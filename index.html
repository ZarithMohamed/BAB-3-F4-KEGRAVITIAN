<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nota Interaktif: Kegravitian (Fizik Tingkatan 4)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3e8ff; /* Light purple background */
        }
        .theme-bg { background-color: #6d28d9; } /* Deep purple */
        .theme-text { color: #6d28d9; }
        .theme-border { border-color: #6d28d9; }
        .content-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .nav-item {
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        .nav-item.active {
            background-color: #8b5cf6;
            color: white;
            font-weight: 600;
        }
        .nav-item:not(.active):hover {
            background-color: #a78bfa;
        }
        .quiz-option {
            border: 2px solid #ddd;
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            border-color: #6d28d9;
            background-color: #f3e8ff;
        }
        .quiz-option.selected {
            border-color: #6d28d9;
            background-color: #c4b5fd;
        }
        .quiz-option.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
    </style>
</head>
<body class="text-gray-800">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="theme-bg text-white shadow-lg p-4">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <i data-lucide="atom" class="w-10 h-10"></i>
                    <div>
                        <h1 class="text-2xl font-bold">Fizik Tingkatan 4: Kegravitian</h1>
                        <p class="text-sm opacity-90">Nota & Kuiz Interaktif oleh Guru Cemerlang Fizik</p>
                    </div>
                </div>
                <nav class="flex items-center space-x-2 bg-purple-800 p-2 rounded-lg">
                    <div id="nav-nota" class="nav-item active">
                        <i data-lucide="book-open" class="inline-block w-5 h-5 mr-2"></i>Nota
                    </div>
                    <div id="nav-kuiz" class="nav-item">
                        <i data-lucide="file-question" class="inline-block w-5 h-5 mr-2"></i>Kuiz
                    </div>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="container mx-auto p-4 md:p-6 lg:p-8">
            <!-- Nota Section -->
            <div id="nota-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                    <!-- Card 1: Pengenalan -->
                    <div class="content-card p-6 lg:col-span-3">
                        <div class="w-full aspect-video rounded-lg overflow-hidden mb-4 shadow-lg">
                            <iframe class="w-full h-full" src="https://www.youtube.com/embed/cBRkczAXZ2w?si=5iQlGFkHISMu1j4P" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                        </div>
                        <img src="https://i.ibb.co/xSDD1hwJ/Screenshot-2025-09-28-102751.png" alt="Konsep Kegravitian" class="w-full rounded-lg shadow-lg mb-4">
                        <div class="flex items-center space-x-3 mb-4">
                            <i data-lucide="rocket" class="w-8 h-8 theme-text"></i>
                            <h2 class="text-2xl font-bold theme-text">Selamat Datang ke Dunia Kegravitian!</h2>
                        </div>
                        <p class="text-gray-600">Bab ini meneroka daya asas yang membentuk alam semesta kita - daripada epal yang jatuh ke Bumi sehinggalah pergerakan planet dan galaksi. Mari kita mulakan pengembaraan kosmik ini bersama-sama!</p>
                    </div>

                    <!-- Card 2: Hukum Kegravitian Semesta Newton -->
                    <div class="content-card p-6 lg:col-span-2">
                         <div class="flex items-center space-x-3 mb-4">
                            <i data-lucide="apple" class="w-8 h-8 text-red-500"></i>
                            <h2 class="text-xl font-bold theme-text">3.1 Hukum Kegravitian Semesta Newton</h2>
                        </div>
                        <p class="mb-4">Hukum ini menyatakan bahawa daya graviti antara dua jasad adalah <strong class="theme-text">berkadar terus</strong> dengan hasil darab jisim kedua-dua jasad dan <strong class="theme-text">berkadar songsang</strong> dengan kuasa dua jarak di antara pusat kedua-dua jasad.</p>
                        
                        <div class="bg-purple-50 p-4 rounded-lg text-center my-4">
                            <p class="font-mono text-lg font-semibold">F = G (m₁m₂ / r²)</p>
                        </div>

                        <ul class="space-y-3">
                            <li><i data-lucide="variable" class="inline-block w-5 h-5 mr-2 text-blue-500"></i><b>F</b> = Daya graviti (N)</li>
                            <li><i data-lucide="scale" class="inline-block w-5 h-5 mr-2 text-green-500"></i><b>m₁</b>, <b>m₂</b> = Jisim bagi dua jasad (kg)</li>
                            <li><i data-lucide="ruler" class="inline-block w-5 h-5 mr-2 text-yellow-500"></i><b>r</b> = Jarak antara pusat dua jasad (m)</li>
                            <li><i data-lucide="globe" class="inline-block w-5 h-5 mr-2 text-purple-500"></i><b>G</b> = Pemalar kegravitian (6.67 x 10⁻¹¹ N m² kg⁻²)</li>
                        </ul>
                    </div>
                    
                    <!-- Card 3: Pecutan Graviti -->
                    <div class="content-card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <i data-lucide="arrow-down-circle" class="w-8 h-8 theme-text"></i>
                            <h2 class="text-xl font-bold theme-text">Pecutan Graviti (g)</h2>
                        </div>
                        <p class="mb-4">Menggunakan F=ma dan hukum kegravitian, kita boleh terbitkan rumus untuk pecutan graviti, g.</p>
                        <div class="bg-purple-50 p-4 rounded-lg text-center my-4">
                            <p class="font-mono text-lg font-semibold">g = GM / r²</p>
                        </div>
                        <p class="text-sm text-gray-600">Di mana <b>M</b> ialah jisim Bumi dan <b>r</b> ialah jarak dari pusat Bumi.</p>
                    </div>

                    <!-- Card 4: Hukum Kepler -->
                    <div class="content-card p-6 lg:col-span-3 accordion">
                        <div class="accordion-header flex justify-between items-center cursor-pointer">
                            <div class="flex items-center space-x-3">
                                <i data-lucide="orbit" class="w-8 h-8 theme-text"></i>
                                <h2 class="text-xl font-bold theme-text">3.2 Hukum-Hukum Kepler</h2>
                            </div>
                            <i data-lucide="chevron-down" class="w-6 h-6 transition-transform"></i>
                        </div>
                        <div class="accordion-content mt-4 pt-4 border-t">
                            <div class="space-y-6">
                                <div>
                                    <h3 class="font-semibold text-lg flex items-center"><i data-lucide="milestone" class="w-5 h-5 mr-2 text-purple-600"></i>Hukum Kepler Pertama</h3>
                                    <p class="ml-7 text-gray-700">Orbit bagi setiap planet adalah berbentuk <strong>elips</strong> dengan Matahari berada di salah satu fokusnya.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg flex items-center"><i data-lucide="area-chart" class="w-5 h-5 mr-2 text-purple-600"></i>Hukum Kepler Kedua</h3>
                                    <p class="ml-7 text-gray-700">Satu garis yang menyambungkan planet dengan Matahari akan mencakupi <strong>luas yang sama dalam sela masa yang sama</strong> apabila planet bergerak dalam orbitnya. Ini bermakna planet bergerak lebih laju apabila lebih dekat dengan Matahari.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg flex items-center"><i data-lucide="equal" class="w-5 h-5 mr-2 text-purple-600"></i>Hukum Kepler Ketiga</h3>
                                    <p class="ml-7 text-gray-700">Kuasa dua tempoh orbit planet (T²) adalah <strong>berkadar terus</strong> dengan kuasa tiga jejari purata orbitnya (r³).</p>
                                    <div class="bg-purple-50 p-4 rounded-lg text-center my-2 ml-7">
                                        <p class="font-mono text-lg font-semibold">T² ∝ r³   atau   T₁²/r₁³ = T₂²/r₂³</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 5: Satelit Buatan Manusia -->
                    <div class="content-card p-6 lg:col-span-3">
                        <div class="flex items-center space-x-3 mb-4">
                            <i data-lucide="satellite" class="w-8 h-8 theme-text"></i>
                            <h2 class="text-xl font-bold theme-text">3.3 Satelit Buatan Manusia</h2>
                        </div>
                        <p class="mb-4">Satelit buatan manusia ialah objek yang dilancarkan ke angkasa dan mengorbit Bumi atau jasad angkasa lain. Pergerakannya bergantung pada keseimbangan antara daya graviti dan daya memusat.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="font-semibold text-lg flex items-center mb-2"><i data-lucide="move-3d" class="w-5 h-5 mr-2 text-purple-600"></i>Laju Linear Satelit (v)</h3>
                                <p class="mb-2">Untuk satelit kekal dalam orbit, daya graviti mesti sama dengan daya memusat.</p>
                                <p class="text-sm text-gray-600 mb-2">Daya graviti = Daya memusat</p>
                                <p class="text-sm text-gray-600 mb-2">GMm/r² = mv²/r</p>
                                <div class="bg-purple-50 p-4 rounded-lg text-center my-2">
                                    <p class="font-mono text-lg font-semibold">v = √(GM/r)</p>
                                </div>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg flex items-center mb-2"><i data-lucide="map-pin" class="w-5 h-5 mr-2 text-purple-600"></i>Satelit Geopegun</h3>
                                <p class="mb-2">Satelit yang kelihatan pegun dari Bumi. Ciri-cirinya:</p>
                                <ul class="list-disc list-inside space-y-1 text-gray-700">
                                    <li>Tempoh orbit T = 24 jam</li>
                                    <li>Mengorbit pada arah yang sama dengan putaran Bumi</li>
                                    <li>Berada di atas khatulistiwa Bumi</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Quiz Section -->
            <div id="quiz-section" class="hidden">
                <div class="content-card p-6 md:p-8 max-w-4xl mx-auto">
                    <div id="quiz-start" class="text-center">
                        <i data-lucide="award" class="w-20 h-20 theme-text mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold theme-text mb-2">Kuiz Interaktif Kegravitian</h2>
                        <p class="text-gray-600 mb-6">Uji pemahaman anda dengan 20 soalan aneka pilihan. Soalan akan disusun secara rawak setiap kali anda mencuba. Semoga berjaya!</p>
                        <button id="start-quiz-btn" class="theme-bg text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-purple-700 transition-transform transform hover:scale-105">
                            Mula Kuiz
                        </button>
                    </div>

                    <div id="quiz-main" class="hidden">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-lg font-semibold">Soalan <span id="question-number"></span> dari 20</div>
                            <div class="text-lg font-semibold theme-text">Skor: <span id="score">0</span></div>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                            <div id="progress-bar" class="bg-purple-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <div id="question-container" class="mb-6">
                            <p class="text-xl font-medium mb-4" id="question-text"></p>
                            <div id="options-container" class="space-y-3"></div>
                        </div>
                        <div class="text-right">
                             <button id="next-question-btn" class="bg-gray-300 text-gray-500 font-bold py-2 px-6 rounded-lg cursor-not-allowed" disabled>Soalan Seterusnya</button>
                        </div>
                    </div>

                    <div id="quiz-end" class="hidden text-center">
                        <i data-lucide="party-popper" class="w-20 h-20 text-yellow-500 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold theme-text mb-2">Tahniah, anda telah selesai!</h2>
                        <p class="text-gray-600 mb-4">Skor akhir anda ialah:</p>
                        <p class="text-5xl font-bold theme-text mb-6" id="final-score"></p>
                        <p id="score-message" class="text-lg mb-8"></p>
                        <button id="restart-quiz-btn" class="theme-bg text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-purple-700 transition-transform transform hover:scale-105">
                            Cuba Lagi
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        lucide.createIcons();

        // Navigation Logic
        const navNota = document.getElementById('nav-nota');
        const navKuiz = document.getElementById('nav-kuiz');
        const notaSection = document.getElementById('nota-section');
        const quizSection = document.getElementById('quiz-section');

        function showNota() {
            notaSection.classList.remove('hidden');
            quizSection.classList.add('hidden');
            navNota.classList.add('active');
            navKuiz.classList.remove('active');
        }

        function showKuiz() {
            notaSection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            navNota.classList.remove('active');
            navKuiz.classList.add('active');
        }

        navNota.addEventListener('click', showNota);
        navKuiz.addEventListener('click', showKuiz);
        
        // Accordion Logic
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('i[data-lucide="chevron-down"]');
                
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.style.transform = 'rotate(0deg)';
                } else {
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                    document.querySelectorAll('.accordion-header i[data-lucide="chevron-down"]').forEach(i => i.style.transform = 'rotate(0deg)');
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.style.transform = 'rotate(180deg)';
                }
            });
        });

        // Quiz Logic
        const quizQuestions = [
            {
                question: "Hukum Kegravitian Semesta Newton menyatakan bahawa daya graviti adalah berkadar songsang dengan...",
                options: ["hasil darab jisim", "kuasa dua jarak antara pusat", "jarak antara pusat", "hasil tambah jisim"],
                answer: "kuasa dua jarak antara pusat"
            },
            {
                question: "Apakah unit bagi Pemalar Kegravitian, G?",
                options: ["N m² kg⁻¹", "N m kg⁻²", "N m² kg⁻²", "N m⁻² kg⁻²"],
                answer: "N m² kg⁻²"
            },
            {
                question: "Dua jasad dengan jisim m₁ dan m₂ berada pada jarak r. Jika jarak antara keduanya digandakan menjadi 2r, apakah yang berlaku kepada daya graviti F?",
                options: ["F menjadi 2F", "F menjadi 4F", "F menjadi F/2", "F menjadi F/4"],
                answer: "F menjadi F/4"
            },
            {
                question: "Menurut Hukum Kepler Pertama, apakah bentuk orbit planet?",
                options: ["Bulatan", "Elips", "Parabola", "Hiperbola"],
                answer: "Elips"
            },
            {
                question: "Hukum Kepler Kedua menyatakan bahawa planet bergerak paling laju apabila ia...",
                options: ["paling jauh dari Matahari", "paling dekat dengan Matahari", "berada pada jejari purata", "mempunyai laju malar"],
                answer: "paling dekat dengan Matahari"
            },
            {
                question: "Hukum Kepler Ketiga menghubungkan tempoh orbit (T) dengan jejari orbit (r) melalui hubungan...",
                options: ["T ∝ r²", "T² ∝ r", "T² ∝ r³", "T³ ∝ r²"],
                answer: "T² ∝ r³"
            },
            {
                question: "Pecutan graviti, g, di permukaan Bumi bergantung kepada...",
                options: ["jisim objek yang jatuh", "jisim Bumi dan jejari Bumi", "jisim objek dan jejari Bumi", "hanya jisim Bumi"],
                answer: "jisim Bumi dan jejari Bumi"
            },
            {
                question: "Apakah yang akan berlaku kepada berat seorang angkasawan jika beliau berada pada ketinggian bersamaan jejari Bumi dari permukaan Bumi?",
                options: ["Beratnya menjadi separuh", "Beratnya menjadi satu perempat", "Beratnya berganda", "Beratnya tidak berubah"],
                answer: "Beratnya menjadi satu perempat"
            },
            {
                question: "Daya yang memastikan satelit sentiasa berada dalam orbitnya ialah...",
                options: ["Daya emparan", "Daya memusat", "Daya rintangan udara", "Daya magnet"],
                answer: "Daya memusat"
            },
            {
                question: "Daya memusat bagi satelit yang mengorbit Bumi dibekalkan oleh...",
                options: ["daya tujah enjinnya", "daya tarikan graviti Bumi", "daya tolakan atmosfera", "daya tarikan graviti Bulan"],
                answer: "daya tarikan graviti Bumi"
            },
            {
                question: "Manakah antara berikut BUKAN ciri satelit geopegun?",
                options: ["Tempoh orbit 24 jam", "Arah orbit sama dengan putaran Bumi", "Orbitnya sentiasa di atas Kutub Utara", "Ketinggian orbitnya tetap"],
                answer: "Orbitnya sentiasa di atas Kutub Utara"
            },
            {
                question: "Jika jisim Bumi digandakan tetapi jejarinya kekal, apakah yang berlaku pada nilai pecutan graviti g?",
                options: ["g menjadi separuh", "g menjadi dua kali ganda", "g menjadi empat kali ganda", "g kekal"],
                answer: "g menjadi dua kali ganda"
            },
             {
                question: "Laju linear satelit yang mengorbit Bumi bergantung pada...",
                options: ["jisim satelit sahaja", "jisim Bumi dan jejari orbit", "jisim satelit dan jisim Bumi", "jejari orbit sahaja"],
                answer: "jisim Bumi dan jejari orbit"
            },
            {
                question: "Dua satelit, P dan Q, mengorbit Bumi. Jejari orbit P adalah lebih besar daripada jejari orbit Q. Manakah pernyataan yang benar?",
                options: ["Laju P lebih besar daripada laju Q", "Laju Q lebih besar daripada laju P", "Laju P dan Q adalah sama", "Tempoh orbit P lebih pendek daripada Q"],
                answer: "Laju Q lebih besar daripada laju P"
            },
            {
                question: "Apakah yang dimaksudkan dengan halaju lepas?",
                options: ["Halaju minimum untuk satelit kekal dalam orbit", "Halaju minimum untuk objek mengatasi daya graviti dan terlepas ke angkasa", "Halaju maksimum yang boleh dicapai oleh roket", "Halaju objek ketika memasuki atmosfera Bumi"],
                answer: "Halaju minimum untuk objek mengatasi daya graviti dan terlepas ke angkasa"
            },
            {
                question: "Nilai G, Pemalar Kegravitian Semesta adalah...",
                options: ["6.67 x 10¹¹ N m² kg⁻²", "9.81 N m² kg⁻²", "6.67 x 10⁻¹¹ N m² kg⁻²", "9.81 m s⁻²"],
                answer: "6.67 x 10⁻¹¹ N m² kg⁻²"
            },
            {
                question: "Siapakah saintis yang merumuskan Hukum Kegravitian Semesta?",
                options: ["Galileo Galilei", "Johannes Kepler", "Isaac Newton", "Albert Einstein"],
                answer: "Isaac Newton"
            },
            {
                question: "Jika jejari orbit sebuah planet adalah 4 kali lebih besar daripada jejari orbit Bumi, berapakah tempoh orbitnya dalam tahun Bumi?",
                options: ["2 tahun", "4 tahun", "8 tahun", "16 tahun"],
                answer: "8 tahun"
            },
            {
                question: "Mengapakah angkasawan di Stesen Angkasa Antarabangsa (ISS) kelihatan terapung walaupun graviti masih wujud?",
                options: ["Kerana tiada graviti di angkasa", "Kerana mereka sentiasa dalam keadaan jatuh bebas bersama stesen angkasa", "Kerana sut angkasa menolak daya graviti", "Kerana daya emparan lebih kuat dari daya graviti"],
                answer: "Kerana mereka sentiasa dalam keadaan jatuh bebas bersama stesen angkasa"
            },
            {
                question: "Medan graviti ditakrifkan sebagai...",
                options: ["Kawasan di mana suatu jasad mengalami daya magnet", "Daya yang bertindak per unit jisim", "Daya yang bertindak per unit cas", "Tenaga yang diperlukan untuk melepaskan objek dari graviti"],
                answer: "Daya yang bertindak per unit jisim"
            }
        ];

        const startQuizBtn = document.getElementById('start-quiz-btn');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');
        const quizStart = document.getElementById('quiz-start');
        const quizMain = document.getElementById('quiz-main');
        const quizEnd = document.getElementById('quiz-end');
        
        const questionNumberEl = document.getElementById('question-number');
        const scoreEl = document.getElementById('score');
        const progressBar = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const finalScoreEl = document.getElementById('final-score');
        const scoreMessageEl = document.getElementById('score-message');

        let shuffledQuestions, currentQuestionIndex, score, answerSelected;

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function startQuiz() {
            quizStart.classList.add('hidden');
            quizEnd.classList.add('hidden');
            quizMain.classList.remove('hidden');

            shuffledQuestions = shuffleArray([...quizQuestions]);
            currentQuestionIndex = 0;
            score = 0;
            scoreEl.textContent = score;
            
            displayQuestion();
        }

        function displayQuestion() {
            answerSelected = false;
            resetState();
            
            let currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = currentQuestion.question;
            
            let shuffledOptions = shuffleArray([...currentQuestion.options]);
            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('w-full', 'text-left', 'p-4', 'rounded-lg', 'quiz-option');
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
            
            updateProgressBar();
        }
        
        function resetState() {
            nextQuestionBtn.disabled = true;
            nextQuestionBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
            nextQuestionBtn.classList.remove('theme-bg', 'text-white');
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
        }
        
        function selectAnswer(e) {
            if (answerSelected) return;
            answerSelected = true;

            const selectedBtn = e.target;
            const correct = selectedBtn.textContent === shuffledQuestions[currentQuestionIndex].answer;
            
            if (correct) {
                score++;
                scoreEl.textContent = score;
                selectedBtn.classList.add('correct');
            } else {
                selectedBtn.classList.add('incorrect');
            }
            
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === shuffledQuestions[currentQuestionIndex].answer) {
                    button.classList.add('correct');
                }
            });

            nextQuestionBtn.disabled = false;
            nextQuestionBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
            nextQuestionBtn.classList.add('theme-bg', 'text-white');
        }

        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                displayQuestion();
            } else {
                endQuiz();
            }
        }
        
        function updateProgressBar() {
            const progressPercentage = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }
        
        function endQuiz() {
            quizMain.classList.add('hidden');
            quizEnd.classList.remove('hidden');
            const finalScore = (score / shuffledQuestions.length) * 100;
            finalScoreEl.textContent = `${score}/${shuffledQuestions.length}`;
            
            let message = "";
            if (finalScore >= 80) {
                message = "Cemerlang! Anda pakar kegravitian!";
            } else if (finalScore >= 60) {
                message = "Baik! Teruskan usaha untuk lebih cemerlang.";
            } else if (finalScore >= 40) {
                message = "Boleh tahan. Ulang kaji sedikit lagi pasti lebih baik.";
            } else {
                message = "Jangan putus asa. Cuba lagi untuk tingkatkan pemahaman anda!";
            }
            scoreMessageEl.textContent = message;
        }

        startQuizBtn.addEventListener('click', startQuiz);
        nextQuestionBtn.addEventListener('click', () => {
            if (currentQuestionIndex < shuffledQuestions.length) {
                showNextQuestion();
            }
        });
        restartQuizBtn.addEventListener('click', startQuiz);

    </script>
</body>
</html>


